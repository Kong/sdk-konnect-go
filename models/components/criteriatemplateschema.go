// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package components

import (
	"encoding/json"
	"errors"
	"fmt"
	"github.com/Kong/sdk-konnect-go/internal/utils"
)

type CriteriaTemplateSchemaType string

const (
	CriteriaTemplateSchemaTypeJSONSchema CriteriaTemplateSchemaType = "json_schema"
)

func (e CriteriaTemplateSchemaType) ToPointer() *CriteriaTemplateSchemaType {
	return &e
}
func (e *CriteriaTemplateSchemaType) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "json_schema":
		*e = CriteriaTemplateSchemaType(v)
		return nil
	default:
		return fmt.Errorf("invalid value for CriteriaTemplateSchemaType: %v", v)
	}
}

// CriteriaTemplateJSONSchema - Defines the parameters required to evaluate the criteria using JSON schema.
// Set to `null` when the given criteria does not rely on parameterization.
type CriteriaTemplateJSONSchema struct {
	Type       CriteriaTemplateSchemaType `json:"type"`
	Definition map[string]any             `json:"definition"`
}

func (c CriteriaTemplateJSONSchema) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(c, "", false)
}

func (c *CriteriaTemplateJSONSchema) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &c, "", false, []string{"type", "definition"}); err != nil {
		return err
	}
	return nil
}

func (c *CriteriaTemplateJSONSchema) GetType() CriteriaTemplateSchemaType {
	if c == nil {
		return CriteriaTemplateSchemaType("")
	}
	return c.Type
}

func (c *CriteriaTemplateJSONSchema) GetDefinition() map[string]any {
	if c == nil {
		return map[string]any{}
	}
	return c.Definition
}

type CriteriaTemplateSchema2Type string

const (
	CriteriaTemplateSchema2TypeSimple CriteriaTemplateSchema2Type = "simple"
)

func (e CriteriaTemplateSchema2Type) ToPointer() *CriteriaTemplateSchema2Type {
	return &e
}
func (e *CriteriaTemplateSchema2Type) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "simple":
		*e = CriteriaTemplateSchema2Type(v)
		return nil
	default:
		return fmt.Errorf("invalid value for CriteriaTemplateSchema2Type: %v", v)
	}
}

type CriteriaTemplateSchemaDefinition string

const (
	CriteriaTemplateSchemaDefinitionString  CriteriaTemplateSchemaDefinition = "string"
	CriteriaTemplateSchemaDefinitionNumber  CriteriaTemplateSchemaDefinition = "number"
	CriteriaTemplateSchemaDefinitionBoolean CriteriaTemplateSchemaDefinition = "boolean"
)

func (e CriteriaTemplateSchemaDefinition) ToPointer() *CriteriaTemplateSchemaDefinition {
	return &e
}
func (e *CriteriaTemplateSchemaDefinition) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "string":
		fallthrough
	case "number":
		fallthrough
	case "boolean":
		*e = CriteriaTemplateSchemaDefinition(v)
		return nil
	default:
		return fmt.Errorf("invalid value for CriteriaTemplateSchemaDefinition: %v", v)
	}
}

// CriteriaTemplateSimpleSchema - Defines the parameters required to evaluate the criteria using simple schema.
// Set to `null` when the given criteria does not rely on parameterization.
type CriteriaTemplateSimpleSchema struct {
	Type       CriteriaTemplateSchema2Type                 `json:"type"`
	Definition map[string]CriteriaTemplateSchemaDefinition `json:"definition"`
}

func (c CriteriaTemplateSimpleSchema) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(c, "", false)
}

func (c *CriteriaTemplateSimpleSchema) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &c, "", false, []string{"type", "definition"}); err != nil {
		return err
	}
	return nil
}

func (c *CriteriaTemplateSimpleSchema) GetType() CriteriaTemplateSchema2Type {
	if c == nil {
		return CriteriaTemplateSchema2Type("")
	}
	return c.Type
}

func (c *CriteriaTemplateSimpleSchema) GetDefinition() map[string]CriteriaTemplateSchemaDefinition {
	if c == nil {
		return map[string]CriteriaTemplateSchemaDefinition{}
	}
	return c.Definition
}

type EmptySchema struct {
}

func (e EmptySchema) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(e, "", false)
}

func (e *EmptySchema) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &e, "", false, nil); err != nil {
		return err
	}
	return nil
}

type CriteriaTemplateSchemaUnionType string

const (
	CriteriaTemplateSchemaUnionTypeEmptySchema                  CriteriaTemplateSchemaUnionType = "EmptySchema"
	CriteriaTemplateSchemaUnionTypeCriteriaTemplateSimpleSchema CriteriaTemplateSchemaUnionType = "CriteriaTemplateSimpleSchema"
	CriteriaTemplateSchemaUnionTypeCriteriaTemplateJSONSchema   CriteriaTemplateSchemaUnionType = "CriteriaTemplateJSONSchema"
)

type CriteriaTemplateSchema struct {
	EmptySchema                  *EmptySchema                  `queryParam:"inline,name=CriteriaTemplateSchema" union:"member"`
	CriteriaTemplateSimpleSchema *CriteriaTemplateSimpleSchema `queryParam:"inline,name=CriteriaTemplateSchema" union:"member"`
	CriteriaTemplateJSONSchema   *CriteriaTemplateJSONSchema   `queryParam:"inline,name=CriteriaTemplateSchema" union:"member"`

	Type CriteriaTemplateSchemaUnionType
}

func CreateCriteriaTemplateSchemaEmptySchema(emptySchema EmptySchema) CriteriaTemplateSchema {
	typ := CriteriaTemplateSchemaUnionTypeEmptySchema

	return CriteriaTemplateSchema{
		EmptySchema: &emptySchema,
		Type:        typ,
	}
}

func CreateCriteriaTemplateSchemaCriteriaTemplateSimpleSchema(criteriaTemplateSimpleSchema CriteriaTemplateSimpleSchema) CriteriaTemplateSchema {
	typ := CriteriaTemplateSchemaUnionTypeCriteriaTemplateSimpleSchema

	return CriteriaTemplateSchema{
		CriteriaTemplateSimpleSchema: &criteriaTemplateSimpleSchema,
		Type:                         typ,
	}
}

func CreateCriteriaTemplateSchemaCriteriaTemplateJSONSchema(criteriaTemplateJSONSchema CriteriaTemplateJSONSchema) CriteriaTemplateSchema {
	typ := CriteriaTemplateSchemaUnionTypeCriteriaTemplateJSONSchema

	return CriteriaTemplateSchema{
		CriteriaTemplateJSONSchema: &criteriaTemplateJSONSchema,
		Type:                       typ,
	}
}

func (u *CriteriaTemplateSchema) UnmarshalJSON(data []byte) error {

	var criteriaTemplateSimpleSchema CriteriaTemplateSimpleSchema = CriteriaTemplateSimpleSchema{}
	if err := utils.UnmarshalJSON(data, &criteriaTemplateSimpleSchema, "", true, nil); err == nil {
		u.CriteriaTemplateSimpleSchema = &criteriaTemplateSimpleSchema
		u.Type = CriteriaTemplateSchemaUnionTypeCriteriaTemplateSimpleSchema
		return nil
	}

	var criteriaTemplateJSONSchema CriteriaTemplateJSONSchema = CriteriaTemplateJSONSchema{}
	if err := utils.UnmarshalJSON(data, &criteriaTemplateJSONSchema, "", true, nil); err == nil {
		u.CriteriaTemplateJSONSchema = &criteriaTemplateJSONSchema
		u.Type = CriteriaTemplateSchemaUnionTypeCriteriaTemplateJSONSchema
		return nil
	}

	var emptySchema EmptySchema = EmptySchema{}
	if err := utils.UnmarshalJSON(data, &emptySchema, "", true, nil); err == nil {
		u.EmptySchema = &emptySchema
		u.Type = CriteriaTemplateSchemaUnionTypeEmptySchema
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for CriteriaTemplateSchema", string(data))
}

func (u CriteriaTemplateSchema) MarshalJSON() ([]byte, error) {
	if u.EmptySchema != nil {
		return utils.MarshalJSON(u.EmptySchema, "", true)
	}

	if u.CriteriaTemplateSimpleSchema != nil {
		return utils.MarshalJSON(u.CriteriaTemplateSimpleSchema, "", true)
	}

	if u.CriteriaTemplateJSONSchema != nil {
		return utils.MarshalJSON(u.CriteriaTemplateJSONSchema, "", true)
	}

	return nil, errors.New("could not marshal union type CriteriaTemplateSchema: all fields are null")
}
