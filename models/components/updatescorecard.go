// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package components

import (
	"errors"
	"fmt"
	"github.com/Kong/sdk-konnect-go/internal/utils"
)

type CriteriaType string

const (
	CriteriaTypeUpdateScorecardCriteria CriteriaType = "UpdateScorecardCriteria"
	CriteriaTypeCreateScorecardCriteria CriteriaType = "CreateScorecardCriteria"
)

type Criteria struct {
	UpdateScorecardCriteria *UpdateScorecardCriteria `queryParam:"inline" union:"member"`
	CreateScorecardCriteria *CreateScorecardCriteria `queryParam:"inline" union:"member"`

	Type CriteriaType
}

func CreateCriteriaUpdateScorecardCriteria(updateScorecardCriteria UpdateScorecardCriteria) Criteria {
	typ := CriteriaTypeUpdateScorecardCriteria

	return Criteria{
		UpdateScorecardCriteria: &updateScorecardCriteria,
		Type:                    typ,
	}
}

func CreateCriteriaCreateScorecardCriteria(createScorecardCriteria CreateScorecardCriteria) Criteria {
	typ := CriteriaTypeCreateScorecardCriteria

	return Criteria{
		CreateScorecardCriteria: &createScorecardCriteria,
		Type:                    typ,
	}
}

func (u *Criteria) UnmarshalJSON(data []byte) error {

	var updateScorecardCriteria UpdateScorecardCriteria = UpdateScorecardCriteria{}
	if err := utils.UnmarshalJSON(data, &updateScorecardCriteria, "", true, nil); err == nil {
		u.UpdateScorecardCriteria = &updateScorecardCriteria
		u.Type = CriteriaTypeUpdateScorecardCriteria
		return nil
	}

	var createScorecardCriteria CreateScorecardCriteria = CreateScorecardCriteria{}
	if err := utils.UnmarshalJSON(data, &createScorecardCriteria, "", true, nil); err == nil {
		u.CreateScorecardCriteria = &createScorecardCriteria
		u.Type = CriteriaTypeCreateScorecardCriteria
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for Criteria", string(data))
}

func (u Criteria) MarshalJSON() ([]byte, error) {
	if u.UpdateScorecardCriteria != nil {
		return utils.MarshalJSON(u.UpdateScorecardCriteria, "", true)
	}

	if u.CreateScorecardCriteria != nil {
		return utils.MarshalJSON(u.CreateScorecardCriteria, "", true)
	}

	return nil, errors.New("could not marshal union type Criteria: all fields are null")
}

// UpdateScorecardScorecardTemplate - The name of the scorecard template used to create the scorecard.
// Otherwise, `null`.
type UpdateScorecardScorecardTemplate string

const (
	UpdateScorecardScorecardTemplateKongBestPractices     UpdateScorecardScorecardTemplate = "kong_best_practices"
	UpdateScorecardScorecardTemplateServiceDocumentation  UpdateScorecardScorecardTemplate = "service_documentation"
	UpdateScorecardScorecardTemplateServiceMaturity       UpdateScorecardScorecardTemplate = "service_maturity"
	UpdateScorecardScorecardTemplateSecurityAndCompliance UpdateScorecardScorecardTemplate = "security_and_compliance"
)

func (e UpdateScorecardScorecardTemplate) ToPointer() *UpdateScorecardScorecardTemplate {
	return &e
}

// IsExact returns true if the value matches a known enum value, false otherwise.
func (e *UpdateScorecardScorecardTemplate) IsExact() bool {
	if e != nil {
		switch *e {
		case "kong_best_practices", "service_documentation", "service_maturity", "security_and_compliance":
			return true
		}
	}
	return false
}

type UpdateScorecard struct {
	// The human-readable name of the scorecard.
	Name        string  `json:"name"`
	Description *string `json:"description"`
	// Selector used to dynamically target catalog entities that will be
	// included in the given scorecard's evaluated score.
	//
	EntitySelector *ScorecardEntitySelector `json:"entity_selector"`
	Criteria       []Criteria               `json:"criteria"`
	// The name of the scorecard template used to create the scorecard.
	// Otherwise, `null`.
	//
	ScorecardTemplate *UpdateScorecardScorecardTemplate `json:"scorecard_template"`
}

func (u *UpdateScorecard) GetName() string {
	if u == nil {
		return ""
	}
	return u.Name
}

func (u *UpdateScorecard) GetDescription() *string {
	if u == nil {
		return nil
	}
	return u.Description
}

func (u *UpdateScorecard) GetEntitySelector() *ScorecardEntitySelector {
	if u == nil {
		return nil
	}
	return u.EntitySelector
}

func (u *UpdateScorecard) GetCriteria() []Criteria {
	if u == nil {
		return []Criteria{}
	}
	return u.Criteria
}

func (u *UpdateScorecard) GetScorecardTemplate() *UpdateScorecardScorecardTemplate {
	if u == nil {
		return nil
	}
	return u.ScorecardTemplate
}
