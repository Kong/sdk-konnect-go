// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package components

import (
	"errors"
	"fmt"
	"github.com/Kong/sdk-konnect-go/internal/utils"
)

type RawValueType string

const (
	RawValueTypeNumber                        RawValueType = "number"
	RawValueTypeStr                           RawValueType = "str"
	RawValueTypeBoolean                       RawValueType = "boolean"
	RawValueTypeTimeValue                     RawValueType = "TimeValue"
	RawValueTypeCriteriaEvaluationRelationMap RawValueType = "CriteriaEvaluationRelationMap"
	RawValueTypeMapOfAny                      RawValueType = "mapOfAny"
	RawValueTypeAny                           RawValueType = "any"
)

// RawValue - Raw value of the criteria evaluation.
//
// For example, a service may be failing the `time_to_acknowledge` criteria evaluation when
// the the mean time-to-ack is greater than 15 minutes. This value represents the _actual_
// mean time-to-ack value for the service which if not passing could be 25 minutes.
type RawValue struct {
	Number                        *float64                       `queryParam:"inline" union:"member"`
	Str                           *string                        `queryParam:"inline" union:"member"`
	Boolean                       *bool                          `queryParam:"inline" union:"member"`
	TimeValue                     *TimeValue                     `queryParam:"inline" union:"member"`
	CriteriaEvaluationRelationMap *CriteriaEvaluationRelationMap `queryParam:"inline" union:"member"`
	MapOfAny                      map[string]any                 `queryParam:"inline" union:"member"`
	Any                           any                            `queryParam:"inline" union:"member"`

	Type RawValueType
}

func CreateRawValueNumber(number float64) RawValue {
	typ := RawValueTypeNumber

	return RawValue{
		Number: &number,
		Type:   typ,
	}
}

func CreateRawValueStr(str string) RawValue {
	typ := RawValueTypeStr

	return RawValue{
		Str:  &str,
		Type: typ,
	}
}

func CreateRawValueBoolean(boolean bool) RawValue {
	typ := RawValueTypeBoolean

	return RawValue{
		Boolean: &boolean,
		Type:    typ,
	}
}

func CreateRawValueTimeValue(timeValue TimeValue) RawValue {
	typ := RawValueTypeTimeValue

	return RawValue{
		TimeValue: &timeValue,
		Type:      typ,
	}
}

func CreateRawValueCriteriaEvaluationRelationMap(criteriaEvaluationRelationMap CriteriaEvaluationRelationMap) RawValue {
	typ := RawValueTypeCriteriaEvaluationRelationMap

	return RawValue{
		CriteriaEvaluationRelationMap: &criteriaEvaluationRelationMap,
		Type:                          typ,
	}
}

func CreateRawValueMapOfAny(mapOfAny map[string]any) RawValue {
	typ := RawValueTypeMapOfAny

	return RawValue{
		MapOfAny: mapOfAny,
		Type:     typ,
	}
}

func CreateRawValueAny(anyT any) RawValue {
	typ := RawValueTypeAny

	return RawValue{
		Any:  anyT,
		Type: typ,
	}
}

func (u *RawValue) UnmarshalJSON(data []byte) error {

	var criteriaEvaluationRelationMap CriteriaEvaluationRelationMap = CriteriaEvaluationRelationMap{}
	if err := utils.UnmarshalJSON(data, &criteriaEvaluationRelationMap, "", true, nil); err == nil {
		u.CriteriaEvaluationRelationMap = &criteriaEvaluationRelationMap
		u.Type = RawValueTypeCriteriaEvaluationRelationMap
		return nil
	}

	var timeValue TimeValue = TimeValue{}
	if err := utils.UnmarshalJSON(data, &timeValue, "", true, nil); err == nil {
		u.TimeValue = &timeValue
		u.Type = RawValueTypeTimeValue
		return nil
	}

	var number float64 = float64(0)
	if err := utils.UnmarshalJSON(data, &number, "", true, nil); err == nil {
		u.Number = &number
		u.Type = RawValueTypeNumber
		return nil
	}

	var str string = ""
	if err := utils.UnmarshalJSON(data, &str, "", true, nil); err == nil {
		u.Str = &str
		u.Type = RawValueTypeStr
		return nil
	}

	var boolean bool = false
	if err := utils.UnmarshalJSON(data, &boolean, "", true, nil); err == nil {
		u.Boolean = &boolean
		u.Type = RawValueTypeBoolean
		return nil
	}

	var mapOfAny map[string]any = map[string]any{}
	if err := utils.UnmarshalJSON(data, &mapOfAny, "", true, nil); err == nil {
		u.MapOfAny = mapOfAny
		u.Type = RawValueTypeMapOfAny
		return nil
	}

	var anyVar any = nil
	if err := utils.UnmarshalJSON(data, &anyVar, "", true, nil); err == nil {
		u.Any = anyVar
		u.Type = RawValueTypeAny
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for RawValue", string(data))
}

func (u RawValue) MarshalJSON() ([]byte, error) {
	if u.Number != nil {
		return utils.MarshalJSON(u.Number, "", true)
	}

	if u.Str != nil {
		return utils.MarshalJSON(u.Str, "", true)
	}

	if u.Boolean != nil {
		return utils.MarshalJSON(u.Boolean, "", true)
	}

	if u.TimeValue != nil {
		return utils.MarshalJSON(u.TimeValue, "", true)
	}

	if u.CriteriaEvaluationRelationMap != nil {
		return utils.MarshalJSON(u.CriteriaEvaluationRelationMap, "", true)
	}

	if u.MapOfAny != nil {
		return utils.MarshalJSON(u.MapOfAny, "", true)
	}

	if u.Any != nil {
		return utils.MarshalJSON(u.Any, "", true)
	}

	return nil, errors.New("could not marshal union type RawValue: all fields are null")
}

// CriteriaEvaluationResultDetails - Provides additional metadata about the criteria evaluation result.
type CriteriaEvaluationResultDetails struct {
	// Raw value of the criteria evaluation.
	//
	// For example, a service may be failing the `time_to_acknowledge` criteria evaluation when
	// the the mean time-to-ack is greater than 15 minutes. This value represents the _actual_
	// mean time-to-ack value for the service which if not passing could be 25 minutes.
	//
	RawValue *RawValue `json:"raw_value"`
	// Renderable text providing human-readable context about the evaluation value.
	DisplayText string `json:"display_text"`
}

func (c *CriteriaEvaluationResultDetails) GetRawValue() *RawValue {
	if c == nil {
		return nil
	}
	return c.RawValue
}

func (c *CriteriaEvaluationResultDetails) GetDisplayText() string {
	if c == nil {
		return ""
	}
	return c.DisplayText
}
