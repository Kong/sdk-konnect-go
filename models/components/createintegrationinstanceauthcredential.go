// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package components

import (
	"errors"
	"fmt"
	"github.com/Kong/sdk-konnect-go/internal/utils"
)

type CreateIntegrationInstanceAuthCredentialType string

const (
	CreateIntegrationInstanceAuthCredentialTypeCreateOAuthCredential                 CreateIntegrationInstanceAuthCredentialType = "CreateOAuthCredential"
	CreateIntegrationInstanceAuthCredentialTypeCreateGitHubAppInstallationCredential CreateIntegrationInstanceAuthCredentialType = "CreateGitHubAppInstallationCredential"
	CreateIntegrationInstanceAuthCredentialTypeMultiKeyAuth                          CreateIntegrationInstanceAuthCredentialType = "multi_key_auth"
	CreateIntegrationInstanceAuthCredentialTypeCreateAWSRoleDelegationAuthCredential CreateIntegrationInstanceAuthCredentialType = "CreateAWSRoleDelegationAuthCredential"
)

type CreateIntegrationInstanceAuthCredential struct {
	CreateOAuthCredential                 *CreateOAuthCredential                 `queryParam:"inline,name=CreateIntegrationInstanceAuthCredential" union:"member"`
	CreateGitHubAppInstallationCredential *CreateGitHubAppInstallationCredential `queryParam:"inline,name=CreateIntegrationInstanceAuthCredential" union:"member"`
	MultiKeyAuth                          *MultiKeyAuth                          `queryParam:"inline,name=CreateIntegrationInstanceAuthCredential" union:"member"`
	CreateAWSRoleDelegationAuthCredential *CreateAWSRoleDelegationAuthCredential `queryParam:"inline,name=CreateIntegrationInstanceAuthCredential" union:"member"`

	Type CreateIntegrationInstanceAuthCredentialType
}

func CreateCreateIntegrationInstanceAuthCredentialCreateOAuthCredential(createOAuthCredential CreateOAuthCredential) CreateIntegrationInstanceAuthCredential {
	typ := CreateIntegrationInstanceAuthCredentialTypeCreateOAuthCredential

	return CreateIntegrationInstanceAuthCredential{
		CreateOAuthCredential: &createOAuthCredential,
		Type:                  typ,
	}
}

func CreateCreateIntegrationInstanceAuthCredentialCreateGitHubAppInstallationCredential(createGitHubAppInstallationCredential CreateGitHubAppInstallationCredential) CreateIntegrationInstanceAuthCredential {
	typ := CreateIntegrationInstanceAuthCredentialTypeCreateGitHubAppInstallationCredential

	return CreateIntegrationInstanceAuthCredential{
		CreateGitHubAppInstallationCredential: &createGitHubAppInstallationCredential,
		Type:                                  typ,
	}
}

func CreateCreateIntegrationInstanceAuthCredentialMultiKeyAuth(multiKeyAuth MultiKeyAuth) CreateIntegrationInstanceAuthCredential {
	typ := CreateIntegrationInstanceAuthCredentialTypeMultiKeyAuth

	return CreateIntegrationInstanceAuthCredential{
		MultiKeyAuth: &multiKeyAuth,
		Type:         typ,
	}
}

func CreateCreateIntegrationInstanceAuthCredentialCreateAWSRoleDelegationAuthCredential(createAWSRoleDelegationAuthCredential CreateAWSRoleDelegationAuthCredential) CreateIntegrationInstanceAuthCredential {
	typ := CreateIntegrationInstanceAuthCredentialTypeCreateAWSRoleDelegationAuthCredential

	return CreateIntegrationInstanceAuthCredential{
		CreateAWSRoleDelegationAuthCredential: &createAWSRoleDelegationAuthCredential,
		Type:                                  typ,
	}
}

func (u *CreateIntegrationInstanceAuthCredential) UnmarshalJSON(data []byte) error {

	var createOAuthCredential CreateOAuthCredential = CreateOAuthCredential{}
	if err := utils.UnmarshalJSON(data, &createOAuthCredential, "", true, nil); err == nil {
		u.CreateOAuthCredential = &createOAuthCredential
		u.Type = CreateIntegrationInstanceAuthCredentialTypeCreateOAuthCredential
		return nil
	}

	var createGitHubAppInstallationCredential CreateGitHubAppInstallationCredential = CreateGitHubAppInstallationCredential{}
	if err := utils.UnmarshalJSON(data, &createGitHubAppInstallationCredential, "", true, nil); err == nil {
		u.CreateGitHubAppInstallationCredential = &createGitHubAppInstallationCredential
		u.Type = CreateIntegrationInstanceAuthCredentialTypeCreateGitHubAppInstallationCredential
		return nil
	}

	var multiKeyAuth MultiKeyAuth = MultiKeyAuth{}
	if err := utils.UnmarshalJSON(data, &multiKeyAuth, "", true, nil); err == nil {
		u.MultiKeyAuth = &multiKeyAuth
		u.Type = CreateIntegrationInstanceAuthCredentialTypeMultiKeyAuth
		return nil
	}

	var createAWSRoleDelegationAuthCredential CreateAWSRoleDelegationAuthCredential = CreateAWSRoleDelegationAuthCredential{}
	if err := utils.UnmarshalJSON(data, &createAWSRoleDelegationAuthCredential, "", true, nil); err == nil {
		u.CreateAWSRoleDelegationAuthCredential = &createAWSRoleDelegationAuthCredential
		u.Type = CreateIntegrationInstanceAuthCredentialTypeCreateAWSRoleDelegationAuthCredential
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for CreateIntegrationInstanceAuthCredential", string(data))
}

func (u CreateIntegrationInstanceAuthCredential) MarshalJSON() ([]byte, error) {
	if u.CreateOAuthCredential != nil {
		return utils.MarshalJSON(u.CreateOAuthCredential, "", true)
	}

	if u.CreateGitHubAppInstallationCredential != nil {
		return utils.MarshalJSON(u.CreateGitHubAppInstallationCredential, "", true)
	}

	if u.MultiKeyAuth != nil {
		return utils.MarshalJSON(u.MultiKeyAuth, "", true)
	}

	if u.CreateAWSRoleDelegationAuthCredential != nil {
		return utils.MarshalJSON(u.CreateAWSRoleDelegationAuthCredential, "", true)
	}

	return nil, errors.New("could not marshal union type CreateIntegrationInstanceAuthCredential: all fields are null")
}
