// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package components

import (
	"encoding/json"
	"fmt"
	"github.com/Kong/sdk-konnect-go/internal/utils"
)

type OverridableConfig string

const (
	OverridableConfigClientID              OverridableConfig = "client_id"
	OverridableConfigClientSecret          OverridableConfig = "client_secret"
	OverridableConfigAuthorizationEndpoint OverridableConfig = "authorization_endpoint"
	OverridableConfigTokenEndpoint         OverridableConfig = "token_endpoint"
)

func (e OverridableConfig) ToPointer() *OverridableConfig {
	return &e
}

// IsExact returns true if the value matches a known enum value, false otherwise.
func (e *OverridableConfig) IsExact() bool {
	if e != nil {
		switch *e {
		case "client_id", "client_secret", "authorization_endpoint", "token_endpoint":
			return true
		}
	}
	return false
}

// OAuthGrantType - The OAuth 2.0 grant type used for authorization (e.g., `authorization_code`).
// Determines the flow the integration uses to request access tokens.
type OAuthGrantType string

const (
	OAuthGrantTypeAuthorizationCode OAuthGrantType = "authorization_code"
)

func (e OAuthGrantType) ToPointer() *OAuthGrantType {
	return &e
}
func (e *OAuthGrantType) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "authorization_code":
		*e = OAuthGrantType(v)
		return nil
	default:
		return fmt.Errorf("invalid value for OAuthGrantType: %v", v)
	}
}

type AuthorizationEndpoint struct {
	// The URL where users are redirected to authorize access.
	URL string `json:"url"`
}

func (a AuthorizationEndpoint) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(a, "", false)
}

func (a *AuthorizationEndpoint) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &a, "", false, []string{"url"}); err != nil {
		return err
	}
	return nil
}

func (a *AuthorizationEndpoint) GetURL() string {
	if a == nil {
		return ""
	}
	return a.URL
}

type TokenEndpoint struct {
	// The URL used to retrieve access tokens.
	URL string `json:"url"`
}

func (t TokenEndpoint) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(t, "", false)
}

func (t *TokenEndpoint) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &t, "", false, []string{"url"}); err != nil {
		return err
	}
	return nil
}

func (t *TokenEndpoint) GetURL() string {
	if t == nil {
		return ""
	}
	return t.URL
}

type OAuthConfig1 struct {
	// The OAuth 2.0 grant type used for authorization (e.g., `authorization_code`).
	// Determines the flow the integration uses to request access tokens.
	//
	GrantType OAuthGrantType `json:"grant_type"`
	// The OAuth client identifier registered with the integration provider.
	ClientID              string                `json:"client_id"`
	AuthorizationEndpoint AuthorizationEndpoint `json:"authorization_endpoint"`
	TokenEndpoint         TokenEndpoint         `json:"token_endpoint"`
	// A list of permission scopes requested by the integration.
	// Defines what level of access the token will grant.
	//
	Scope []string `json:"scope"`
	// A string used to separate multiple scopes in the `scope` parameter.
	//
	ScopeDelimiter *string `default:" " json:"scope_delimiter"`
	// Number of seconds before the refresh token grant can no longer be used to mint
	// a new access token. Once expired clients must re-authenticate to restart the
	// window interval.
	//
	RollingRefreshExpSeconds *float64 `json:"rolling_refresh_exp_seconds"`
}

func (o OAuthConfig1) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(o, "", false)
}

func (o *OAuthConfig1) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &o, "", false, []string{"grant_type", "client_id", "authorization_endpoint", "token_endpoint", "scope"}); err != nil {
		return err
	}
	return nil
}

func (o *OAuthConfig1) GetGrantType() OAuthGrantType {
	if o == nil {
		return OAuthGrantType("")
	}
	return o.GrantType
}

func (o *OAuthConfig1) GetClientID() string {
	if o == nil {
		return ""
	}
	return o.ClientID
}

func (o *OAuthConfig1) GetAuthorizationEndpoint() AuthorizationEndpoint {
	if o == nil {
		return AuthorizationEndpoint{}
	}
	return o.AuthorizationEndpoint
}

func (o *OAuthConfig1) GetTokenEndpoint() TokenEndpoint {
	if o == nil {
		return TokenEndpoint{}
	}
	return o.TokenEndpoint
}

func (o *OAuthConfig1) GetScope() []string {
	if o == nil {
		return []string{}
	}
	return o.Scope
}

func (o *OAuthConfig1) GetScopeDelimiter() *string {
	if o == nil {
		return nil
	}
	return o.ScopeDelimiter
}

func (o *OAuthConfig1) GetRollingRefreshExpSeconds() *float64 {
	if o == nil {
		return nil
	}
	return o.RollingRefreshExpSeconds
}

// OAuth1 - Defines the OAuth 2.0 authorization strategy used by an integration.
// This schema provides all necessary information for the platform to initiate
// and manage OAuth-based authorization flows on behalf of customers.
type OAuth1 struct {
	type_ string `const:"oauth" json:"type"`
	// A list of field names from the `config` object (e.g., `client_id`, `authorization_endpoint`, etc)
	// that can be overridden on a per-customer basis. When a field is listed here, the catalog allows
	// customer-defined values to take precedence over the default configuration provided by the integration.
	// This supports flexible deployment models, including both SaaS-based and self-hosted OAuth authorization flows.
	//
	OverridableConfig []OverridableConfig `json:"overridable_config,omitempty"`
	Config            OAuthConfig1        `json:"config"`
}

func (o OAuth1) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(o, "", false)
}

func (o *OAuth1) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &o, "", false, []string{"type", "config"}); err != nil {
		return err
	}
	return nil
}

func (o *OAuth1) GetType() string {
	return "oauth"
}

func (o *OAuth1) GetOverridableConfig() []OverridableConfig {
	if o == nil {
		return nil
	}
	return o.OverridableConfig
}

func (o *OAuth1) GetConfig() OAuthConfig1 {
	if o == nil {
		return OAuthConfig1{}
	}
	return o.Config
}
